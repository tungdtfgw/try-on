# US-01: Đăng ký và đăng nhập bằng email/mật khẩu

## Bối cảnh
- Epic: Thiết lập hồ sơ khách hàng.
- Vai trò: Người dùng cuối.
- Mục tiêu: Có tài khoản cá nhân để truy cập các tính năng (hồ sơ, thử đồ).

## Phạm vi
- Đăng ký tài khoản bằng email/mật khẩu, kiểm tra email duy nhất, hash mật khẩu.
- Đăng nhập bằng email/mật khẩu, verify thông tin, trả JWT, lưu token client.
- Logout xoá token trên client, điều hướng về trang công khai.
- Bảo vệ route/endpoint yêu cầu đăng nhập, redirect khi token không hợp lệ.

## Luồng chính (happy path)
- Register: mở form đăng ký → nhập email/mật khẩu/xác nhận → submit → server validate + hash → tạo user → trả thông báo thành công → điều hướng (login hoặc dashboard).
- Login: mở form đăng nhập → nhập email/mật khẩu → submit → server verify → trả JWT → client lưu token → redirect sang trang bảo vệ (dashboard/profile).
- Logout: người dùng bấm logout → client xoá token → điều hướng về landing/login.

## Luồng lỗi cần xử lý
- Email trùng.
- Định dạng email sai.
- Mật khẩu không đạt tiêu chí hoặc xác nhận không khớp.
- Email không tồn tại hoặc mật khẩu sai.
- Token hết hạn/không hợp lệ → yêu cầu đăng nhập lại.
- Lỗi mạng/server → thông báo thân thiện, không lộ chi tiết.

## Dữ liệu & validate gợi ý
- Email: định dạng hợp lệ, lowercase, unique.
- Mật khẩu: tối thiểu 8 ký tự, nên có chữ thường/hoa/số/ký tự đặc biệt.

## Acceptance Criteria (kết hợp sprint backlog)
- Đăng ký thành công tài khoản mới; chặn email trùng.
- Mật khẩu luôn được hash trước khi lưu.
- Đăng nhập thành công trả JWT và lưu trữ được trên client.
- Redirect sau login; logout hoạt động.
- Protected routes chỉ truy cập khi đã login.
- Validation và thông báo lỗi rõ ràng.

## Phi chức năng
- Bảo mật JWT (secret, TTL hợp lý); không log plaintext mật khẩu.
- CORS cấu hình đúng; thông báo lỗi/success nhất quán.
- UI thân thiện, hoạt động tốt trên desktop/mobile cơ bản.
